	INCLUDE "p10f222.inc"
	__CONFIG _IOSCFS_4MHZ & _MCPU_OFF & _WDT_OFF & _CP_OFF & _MCLRE_OFF 
	LIST P=PIC10F222

DE1	EQU	09H
DE2	EQU	0AH
LP1	EQU	0BH
SENS	EQU	0CH
	
	ORG	00H

CONF
	MOVF	OSCCAL
	BCF	OSCCAL,0
	MOVLW	B'11000000'
	;ANS1, ANS0, -, -, CHS1, CHS2, GO/UNDO, ADON
	MOVWF	ADCON0
	MOVLW	B'00001110'
	;NC,NC,NC,NC,GP3,GP2,GP1,GP0
	MOVWF	GPIO
 	MOVLW	B'10000000'
	OPTION

MAIN
	MOVLW	B'00001111'
	TRIS	GPIO
	CALL	DELAY2

	MOVLW	B'0T0000000'
	TRIS	GPIO
	CALL	DELAY2

	;; ADC  output:ADRES
	BSF	ADCON0,0	;start reading
	CLRF	ADRES		;output reset
	CALL	DELAY1
	BSF	ADCON0,1	;set ending checker
SENSLP	BTFSC	ADCON0,1	;check ending
	GOTO	SENSLP
	BCF	ADCON0,0	;end reading
	GOTO	MAIN
	
DELAY1
	MOVLW	D'248'
	MOVWF	DE1
DLP1	NOP
	DECFSZ	DE1,F
	GOTO	DLP1
	RETLW	D'0'
	
DELAY2
	MOVFW	ADRES
	MOVWF	DE2
DLP2	CALL	DELAY1
	DECFSZ	DE2,F
	GOTO	DLP2
	RETLW	D'0'

	END
